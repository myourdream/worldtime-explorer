# 世界时间查看器

一个功能强大的微信小程序，用于查看全球主要城市的实时时间，支持城市搜索和时区转换功能。

## 🌟 功能特性

### 主要功能
- **实时时间显示**: 显示全球主要城市的实时时间，自动更新
- **城市搜索**: 支持搜索全球城市并显示时间信息
- **时区转换**: 在不同时区间转换时间
- **收藏功能**: 收藏喜欢的城市，快速访问
- **自定义时间**: 支持自定义时间进行时区转换

### 技术特性
- **组件化开发**: 使用可复用的CityCard和TimeDisplay组件
- **云开发支持**: 集成微信云开发，提供稳定的后端服务
- **现代UI设计**: 卡片布局、渐变背景、平滑动画
- **响应式设计**: 适配不同屏幕尺寸
- **性能优化**: 防抖搜索、缓存机制、懒加载

## 📱 页面结构

### 首页 (pages/index/)
- 显示多个主要城市的实时时间
- 当前本地时间显示
- 快捷操作入口
- 城市收藏管理

### 城市搜索页面 (pages/city-search/)
- 城市搜索功能
- 搜索历史记录
- 热门城市推荐
- 时区分组浏览

### 时区转换页面 (pages/time-converter/)
- 源时区和目标时区选择
- 时间转换计算
- 自定义时间输入
- 转换历史记录

## 🧩 组件说明

### CityCard 组件 (components/city-card/)
城市卡片组件，显示城市信息和时间
- 城市名称和国家
- 实时时间显示
- 时区信息
- 收藏功能
- 错误处理

### TimeDisplay 组件 (components/time-display/)
时间显示组件，格式化显示时间
- 多种时间格式
- 时区支持
- 动画效果
- 加载状态

## ☁️ 云函数

### get-world-time
获取世界时间的云函数
- 支持单个或多个时区查询
- 返回格式化的时间信息
- 包含时区偏移和夏令时信息

### search-cities
搜索城市的云函数
- 支持关键词搜索
- 地区筛选功能
- 相关性排序
- 包含全球主要城市数据库

## 🛠️ 技术栈

- **前端**: WXML, WXSS, JavaScript
- **组件**: 微信小程序自定义组件
- **云开发**: 微信云函数
- **工具库**: 自定义时区工具函数
- **设计**: 现代UI设计，渐变背景，动画效果

## 📁 项目结构

```
worldtime-explorer/
├── app.js                 # 应用入口文件
├── app.json              # 应用配置文件
├── app.wxss              # 全局样式文件
├── sitemap.json          # 站点地图配置
├── pages/                # 页面目录
│   ├── index/           # 首页
│   ├── city-search/     # 城市搜索页
│   └── time-converter/  # 时区转换页
├── components/          # 组件目录
│   ├── city-card/       # 城市卡片组件
│   └── time-display/    # 时间显示组件
├── utils/               # 工具函数
│   ├── timezone.js      # 时区工具函数
│   └── constants.js     # 常量定义
└── cloudfunctions/      # 云函数
    ├── get-world-time/  # 获取世界时间
    └── search-cities/   # 搜索城市
```

## 🚀 快速开始

### 环境要求
- 微信开发者工具
- 微信小程序账号
- 云开发环境

### 安装步骤

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd worldtime-explorer
   ```

2. **导入项目**
   - 打开微信开发者工具
   - 选择"导入项目"
   - 选择项目目录

3. **配置云开发**
   - 在微信开发者工具中开通云开发
   - 获取云开发环境ID
   - 更新app.js中的环境ID

4. **部署云函数**
   ```bash
   # 部署获取世界时间云函数
   cd cloudfunctions/get-world-time
   npm install
   
   # 部署搜索城市云函数
   cd ../search-cities
   npm install
   ```

5. **运行项目**
   - 在微信开发者工具中点击"编译"
   - 在模拟器中预览效果

## 📖 使用说明

### 首页使用
1. 查看主要城市的实时时间
2. 长按城市卡片添加到收藏
3. 点击刷新按钮更新数据
4. 使用快捷操作进入其他功能

### 城市搜索
1. 在搜索框输入城市名称
2. 查看搜索结果
3. 点击城市添加到首页
4. 浏览热门城市和时区分组

### 时区转换
1. 选择源时区和目标时区
2. 点击转换按钮
3. 查看转换结果和时间差
4. 使用自定义时间进行转换

## 🎨 设计特色

### 视觉设计
- **渐变背景**: 使用紫色渐变背景，营造现代感
- **卡片布局**: 采用卡片式设计，层次分明
- **圆角设计**: 统一的圆角风格，视觉柔和
- **阴影效果**: 适当的阴影增加层次感

### 交互设计
- **平滑动画**: 页面切换和元素动画流畅
- **反馈机制**: 操作反馈及时，用户体验良好
- **加载状态**: 完善的加载和错误状态处理
- **响应式**: 适配不同屏幕尺寸

### 色彩系统
- **主色调**: #667eea (蓝紫色)
- **辅助色**: #764ba2 (深紫色)
- **成功色**: #27ae60 (绿色)
- **警告色**: #f39c12 (橙色)
- **错误色**: #e74c3c (红色)

## 🔧 配置说明

### 应用配置 (app.json)
- 页面路径配置
- 底部导航栏配置
- 全局组件注册
- 权限配置

### 云开发配置
- 环境ID: worldtime-explorer
- 云函数: get-world-time, search-cities
- 数据库: 可选，用于存储用户数据

### 常量配置 (utils/constants.js)
- 默认城市列表
- 时区分组
- 颜色主题
- 错误消息

## 📊 性能优化

### 前端优化
- **防抖搜索**: 避免频繁搜索请求
- **缓存机制**: 本地存储用户偏好和搜索历史
- **懒加载**: 按需加载组件和数据
- **定时器管理**: 合理管理定时器，避免内存泄漏

### 后端优化
- **云函数**: 使用云函数提供稳定的后端服务
- **数据缓存**: 缓存时区数据，减少计算
- **错误处理**: 完善的错误处理和降级方案

## 🐛 问题排查

### 常见问题

1. **时间显示不正确**
   - 检查时区设置
   - 确认云函数部署成功
   - 查看控制台错误信息

2. **搜索功能异常**
   - 检查网络连接
   - 确认云函数调用权限
   - 查看搜索关键词格式

3. **页面加载缓慢**
   - 检查网络状况
   - 优化图片资源
   - 减少不必要的请求

### 调试方法
- 使用微信开发者工具的调试功能
- 查看控制台日志信息
- 使用云开发控制台监控云函数

## 🔮 未来规划

### 功能扩展
- [ ] 添加更多城市和时区
- [ ] 支持多语言界面
- [ ] 添加时间提醒功能
- [ ] 支持自定义主题

### 技术优化
- [ ] 优化云函数性能
- [ ] 添加数据缓存策略
- [ ] 支持离线模式
- [ ] 添加单元测试

## 📄 许可证

本项目采用 MIT 许可证，详情请查看 [LICENSE](LICENSE) 文件。

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来帮助改进项目。

### 贡献步骤
1. Fork 本项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 Issue
- 发送邮件
- 微信联系

---

**世界时间查看器** - 让时间管理更简单，让世界更近一步！
