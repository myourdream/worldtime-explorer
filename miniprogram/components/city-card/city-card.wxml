<!-- components/city-card/city-card.wxml -->
<view class="city-card {{isFavorite ? 'favorite' : ''}} {{isSelected ? 'selected' : ''}}" 
      bindlongpress="onLongPress" 
      bindtap="onTap">
  
  <!-- 城市信息头部 -->
  <view class="city-header">
    <view class="city-info">
      <view class="city-name">{{cityData.name}}</view>
      <view class="city-country">{{cityData.country}}</view>
    </view>
    <view class="city-actions">
      <view class="favorite-btn {{isFavorite ? 'active' : ''}}" 
            bindtap="toggleFavorite" 
            catchtap="true">
        <text class="icon-heart">{{isFavorite ? '❤️' : '🤍'}}</text>
      </view>
      <view class="remove-btn" 
            bindtap="removeCity" 
            catchtap="true"
            wx:if="{{showRemove}}">
        <text class="icon-close">✕</text>
      </view>
    </view>
  </view>

  <!-- 时间显示区域 -->
  <view class="time-section">
    <time-display 
      time="{{currentTime}}" 
      timezone="{{cityData.timezone}}"
      format="{{timeFormat}}"
      show-seconds="{{showSeconds}}">
    </time-display>
  </view>

  <!-- 时区信息 -->
  <view class="timezone-info">
    <view class="timezone-name">{{cityData.timezone}}</view>
    <view class="timezone-offset">{{timezoneOffset}}</view>
  </view>

  <!-- 日期信息 -->
  <view class="date-section">
    <view class="date-display">{{formattedDate}}</view>
    <view class="day-of-week">{{dayOfWeek}}</view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-overlay" wx:if="{{isLoading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 错误状态 -->
  <view class="error-overlay" wx:if="{{hasError}}">
    <text class="error-icon">⚠️</text>
    <text class="error-text">{{errorMessage}}</text>
    <button class="retry-btn" bindtap="retryLoad" size="mini">重试</button>
  </view>
</view>
